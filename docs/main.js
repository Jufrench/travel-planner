!function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=3)}([function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t),a.d(t,"initFunc",(function(){return c}));const n=e=>{const t=document.createElement(e.elType);return void 0!==e.id&&(t.id=e.id),void 0!==e.id&&(t.id=e.id),e.classes.length>0&&(t.className=e.classes),void 0!==e.text&&(t.innerHTML=e.text),void 0!==e.attribute&&t.setAttribute(e.attribute.name,e.attribute.value),t},s=e=>{document.querySelector(".trips-section").innerHTML="",e.forEach(e=>{document.querySelector(".trips-section").appendChild(e)})},r=e=>{e.date.map((e,t,a)=>{a[t]=a[t].toString()});const t=n({elType:"div",classes:["wrap trip-wrap"]}),a=n({elType:"header",classes:["trip-header"]}),s=n({elType:"button",classes:["remove-btn"],attribute:{name:"type",value:"button"}}),r=n({elType:"span",classes:"fa fa-close"});s.appendChild(r),a.appendChild(s);const l=n({elType:"div",classes:"image-wrap"});l.style.backgroundImage=`url(${e.imageURL})`;const i=n({elType:"div",classes:["city-country"]}),d=n({elType:"span",classes:["city"],text:e.city}),p=n({elType:"span",classes:["country"],text:e.country});i.appendChild(d),i.appendChild(p);const c=n({elType:"div",classes:["trip-dates-wrap"]}),o=n({elType:"span",classes:["depart-date"],text:e.date[1]+"."+e.date[2]+"."+e.date[0]}),u=n({elType:"span",classes:["date-countdown"],text:e.daysAway+" Days Away"});c.appendChild(o),c.appendChild(u);const y=n({elType:"div",classes:["body"]});t.appendChild(a),t.appendChild(l),y.appendChild(i),y.appendChild(c),t.appendChild(y);"current"===e.weather_to_get?(t=>{const a=n({elType:"div",classes:["weather currenrt"]}),s=n({elType:"span",classes:["temp"],text:e.weather[0].temp+" °F - "}),r=n({elType:"span",classes:["description"],text:e.weather[0].description});a.appendChild(s),a.appendChild(r),t.insertAdjacentElement("afterend",a)})(c):(t=>{const a=n({elType:"div",classes:["weather forecast"]}),s=n({elType:"h3",classes:["title"],text:"16 Day "+e.weather_to_get}),r=n({elType:"span",classes:["fa fa-caret-down"]}),l=n({elType:"span",classes:["fa fa-caret-up"]});s.appendChild(r),s.appendChild(l),a.appendChild(s);const i=n({elType:"div",classes:["forecast-wrap"]});e.weather.forEach(e=>{const t=n({elType:"div",classes:["forecast-day"]}),a=n({elType:"span",classes:["high"]}),s=n({elType:"span",classes:["fa fa-arrow-up"]}),r=n({elType:"span",classes:["temp"],text:e.high+" °F"});a.appendChild(s),a.appendChild(r);const l=n({elType:"span",classes:["low"]}),d=n({elType:"span",classes:["fa fa-arrow-down"]}),p=n({elType:"span",classes:["temp"],text:e.low+" °F"});l.appendChild(d),l.appendChild(p);const c=n({elType:"span",classes:["description"],text:e.desc});t.appendChild(a),t.appendChild(l),t.appendChild(c),i.appendChild(t)}),a.appendChild(i),t.insertAdjacentElement("afterend",a)})(c);const h=n({elType:"article",id:e.id,classes:["trip col md-is-6 lg-is-6 xl-is-4"]});return h.setAttribute("data-date",e.dataDate),h.appendChild(t),h};let l=[];const i=()=>document.querySelector("#city-input").value,d=()=>{const e={},t=(()=>{let e=document.querySelector("#date-input").value.split("-");return e=e.map(e=>parseInt(e)),e[1]--,e})();if(!(i().length>0))return!1;e.city=i();if(t.length<3)return!1;e.trip_date=t;const a=new Date(t[0],t[1],t[2]),n=new Date,s=new Date;return s.setDate(n.getDate()+8),e.weather_data=a<s?"current":"forecast",e.trip_date[1]++,e},p=e=>{const t=(e=>{const t=new Date,a=new Date(e[0],e[1]-1,e[2]);return Math.ceil((a-t)/864e5)})(e.date);return r({id:e.id,city:e.city,country:e.country,date:e.date,weather_to_get:e.weather_to_get,weather:e.weather,imageURL:e.imageURL,dataDate:new Date(e.date[0],e.date[1]-1,e.date[2]).getTime(),daysAway:t})};function c(){document.querySelector(".add-trip-button").addEventListener("click",e=>{e.preventDefault(),(async e=>{let t;return t=await fetch("http://localhost:3000",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t})(d()).then(()=>(async()=>{let e;try{e=await fetch("http://localhost:3000/data").then(e=>e.json())}catch(e){console.log(e)}return e})()).then(e=>p(e)).then(e=>{return t=e,l.push(t),l;var t}).then(e=>(e=>{if(e.length>1){for(var t,a=0;a<e.length-1;a++)for(var n=0;n<e.length-1;n++)e[n].dataset.date>e[n+1].dataset.date&&(t=e[n+1],e[n+1]=e[n],e[n]=t);return e}return e})(e)).then(e=>s(e))}),document.querySelector(".trips-section").addEventListener("click",e=>{e.target.classList.contains("fa-close")&&(e=>{const t=l.filter(t=>t.id!==e);l=t,s(t)})(e.target.closest(".trip").id),e.target.classList.contains("title")&&e.target.parentElement.classList.toggle("open")})}a(0),a(1),a(2);window.addEventListener("DOMContentLoaded",c)}]);